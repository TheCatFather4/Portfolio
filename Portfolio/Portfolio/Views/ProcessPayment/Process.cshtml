@using Portfolio.Models.Ordering
@model PaymentForm
@{
    Layout = "_CafeLayout";
    ViewData["Title"] = "Process Payment";
}

@if (Model.PaymentStatusId != 1)
{
    <div class="text-center my-3">
        <h2>Process Payment</h2>
    </div>
    <div class="container">
        <div class="row">
            <form asp-controller="ProcessPayment" asp-action="Process" method="post" class="border border-info border-5 rounded p-3 bg-primary">
                @Html.AntiForgeryToken()
                <input type="hidden" asp-for="OrderId" />
                <div class="form-floating mb-3">
                    <select asp-for="PaymentTypeId" asp-items="Model.PaymentTypes" class="form-control" id="formInput">
                        <option value=""></option>
                    </select>
                    <label asp-for="PaymentTypeId">Payment Method</label>
                    <span asp-validation-for="PaymentTypeId" class="text-light"></span>
                </div>
                <div class="form-floating mb-3">
                    <input type="text" asp-for="Amount" class="form-control" id="formInput" />
                    <label asp-for="Amount">Amount</label>
                    <span asp-validation-for="Amount" class="text-light"></span>
                </div>
                <input type="hidden" asp-for="TransactionDate" />
                <input type="hidden" asp-for="PaymentStatusId" />
                <div>
                    <button class="btn btn-success me-2">Confirm Payment</button>
                    <a asp-controller="Profile" asp-action="Index" class="link-light link-opacity-50-hover link-underline-opacity-50">Back to customer Profile</a>
                </div>
            </form>
        </div>
    </div>
}
else
{
    <div class="text-center my-3">
        <h2>Payment Confirmation</h2>
    </div>
    <div class="container">
        <div class="row">
            <table class="table table-bordered border-info table-success table-striped">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>Payment Type</th>
                        <th>Amount Paid</th>
                        <th>Date</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>@Model.OrderId</td>
                        <td>@Model.PaymentTypeId</td>
                        <td>@Model.Amount</td>
                        <td>@Model.TransactionDate</td>
                        @if (Model.PaymentStatusId == 1)
                        {
                            <td class="text-success">Paid</td>
                        }
                        else
                        {
                            <td class="text-danger">Declined</td>
                        }
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="text-center">
        <h3>Go to:</h3>
        <h5><a asp-controller="Profile" asp-action="Index">Customer profile</a></h5>
        <h5><a asp-controller="Cafe" asp-action="Index">Cafe Home</a></h5>
    </div>
}